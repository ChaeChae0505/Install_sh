# 작동관련
- $ roslaunch kobuki_node minimal.launch
- $ roslaunch kobuki_keyop safe_keyop.launch

## Kobuki with RPLidar slam, navigation
1. kobuki_noetic.sh install
- $ bash kobuki_noetic.sh

2. connect
- RPlidar usb를 먼저 꼽고 , kobuki
- 설정해서 사용해도 됨!
- $ ls -l /dev | grep ttyUSB # 잘 잡히나 확인해보기
- $ sudo chmod 666 /dev/ttyUSB0 # RPlidar 권한 주기

```
아래의 rules를 이용하여 rplidar 장치의 permittion 설정

   KERNEL=="ttyUSB*", MODE="0666"



이 과정을 빠트리면, /dev/ttyUSB0 장치를 사용하는 node 구동 시 permittion 에러로 인해 node가 실행되지 않는다. 임시 방편으로 sudo chmod 666 /dev/dev/ttyUSB0 를 실행하면 되지만, 해당 USB 장치를 분리 후 재연결 하거나, 콘솔창을 다시 열거나, 시스템이 리부팅 될 때마다 다시 실행 해주어야 하므로, 아래 처럼 udev.rules를 수정한다. 



'/etc/udev/rules.d/70-persistent-net.rules' 파일을 열어 아래 표시된 부분을 추가한다.

 $ sudo nano /etc/udev/rules.d/70-persistent-net.rules



  GNU nano 2.2.6           File: /etc/init.d/ttyAMA0.conf             Modified

​# This file was automatically generated by the /lib/udev/write_net_rules
# program, run by the persistent-net-generator.rules rules file.
#
# You can modify it, as long as you keep each rule on a single
# line, and change only the value of the NAME= key.

# USB device 0x:0x (smsc95xx)
SUBSYSTEM=="net", ACTION=="add", DRIVERS=="?*", ATTR{address}=="b8:27:eb:14:a2:$

# USB device 0x:0x (rtl8192cu)
SUBSYSTEM=="net", ACTION=="add", DRIVERS=="?*", ATTR{address}=="00:a8:2b:00:04:$ 

# USB device for rplidar

KERNEL=="ttyUSB*", MODE="0666" 


^G Get Help  ^O WriteOut  ^R Read File ^Y Prev Page ^K Cut Text  ^C Cur Pos
^X Exit      ^J Justify   ^W Where Is  ^V Next Page ^U UnCut Text^T To Spell 

 

udev 는 시스템에 연결된 장치의 노드를 그 연결순서와 상관없이 연결될 때마다 동적으로 제공하는 일종의 장치관리자로서, 장치가 연결 될 때 장치명과, 권한 등을 정해준다. 이 때 그 규칙이 기재된 파일을 참조하게 되는데, 우분투의 경우 '/etc/udev/rules.d/70-persistent-net.rules'파일이 바로 그 파일이다.
```

3. Sensor 구동
- $ roslaunch rplidar_ros rplidar.launch


## [Reference]
- [wiki](http://wiki.ros.org/kobuki/Tutorials/Examine%20Kobuki)
- [turtlebot2 RPlidarA2](https://surfertas.github.io/ros/2020/07/11/turtlebot2-lidar.html)
- [Justin](https://soohwan-justin.tistory.com/)
